{% extends "meny.html" %}
{% load static %}

{% block innhold %}

<div class="wrapper">
	<div class="title-wrapper">
		<h2>Medlemmer</h2>
	</div>
	<form action="" method="get">
	<h3>Søk</h3>
		<label for="name">Navn
			<input type="text" id="name" name="name" value={{ name }}>
		</label>
		<button href="#" class="show-advanced-search-btn" id="show-advanced-search-btn">Avansert søk</button>
		<div class="advanced-search" id="advanced-search">
			<div class="search-parameter">
				<h4>Opptaksår</h4>
				<label for="admission_year_from">Fra
				<input
					name="admission_year_from"
					id="admission_year_from"
					pattern="\d{4}"
					value={{ admission_year_from }}
				>
				</label>
				<label for="admission_year_to">Til
				<input
					name="admission_year_to"
					id="admission_year_to"
					pattern="\d{4}"
					value={{ admission_year_to }}
				>
				</label>
			</div>
			<div class="search-parameter">
				<h4>Undergjeng</h4>
				<label for="costume_maker">
				Kostyme
					<input
						type="checkbox"
						id="costume_maker"
						name="group"
						value="1"
						{% if 1 in groups %}checked{% endif %}
					>
				</label>
				<label for="set_builder">
				Kulisse
					<input
						type="checkbox"
						id="set_builder"
						name="group"
						value="2"
						{% if 2 in groups %}checked{% endif %}
					>
				</label>
				<label for="actor">
				Skuespillere
					<input
						type="checkbox"
						id="actor"
						name="group"
						value="3"
						{% if 3 in groups %}checked{% endif %}
					>
				</label>
			</div>
			<div class="search-parameter">
				<h4>Gjengstatus</h4>
				<label for="active_member">
					Aktiv
					<input
						type="checkbox"
						name="status"
						id="active_member"
						value="1"
						{% if 1 in statuses %}checked{% endif %}
					>
				</label>
				<label for="veteran_member">
					Veteran
					<input
						type="checkbox"
						name="status"
						id="veteran_member"
						value="2"
						{% if 2 in statuses %}checked{% endif %}
					>
				</label>
				<label for="pensioned_member">
					Pangsjonist
					<input
						type="checkbox"
						name="status"
						id="pensioned_member"
						value="3"
						{% if 3 in statuses %}checked{% endif %}
					>
				</label>
				<label for="inactive_member">
					Inaktiv
					<input
						type="checkbox"
						name="status"
						id="inactive_member"
						value="4"
						{% if 4 in statuses %}checked{% endif %}
					>
				</label>
			</div>
		</div>

		<input type="submit" value="Søk">
	</form>

	<div class="card-wrapper">
		{% for medlem in mliste %}
			<a class="card card-{{ medlem.get_undergjeng_display|lower }}" href="{% url 'medlem_info' medlem.id %}">
				{% if user.is_authenticated and medlem.portrett.url %}
					<img src="{{medlem.portrett.url}}" class="card-image">
				{% else %}
					<img src="/files/default/katt.png" class="card-image">
				{% endif %}
				<div class="card-container">
					<h4 class="card-title">{{medlem.fornavn}} {{medlem.mellomnavn}} {{medlem.etternavn}}</h4> 
					<div class="text-info text-strong">
						{% if medlem.status %}
							{{medlem.get_status_display|capfirst}}
						{% else %}
							{{medlem.get_mtype_display|capfirst}}
						{% endif %}
					</div> 
				</div>
			</a>
		{% empty %}
			<p>Fant ingen medlemmer.</p>
		{% endfor %}

		{% if FEATURES.TOGGLE_EDIT and perms.SITdata.add_medlem %}
			<br><br>
			<div class="btn-wrapper">
				<a class="btn" href="{% url 'medlem_ny' %}">Nytt medlem</a>
			</div>
		{% endif %}
	</div>

	{% load static %}
	<script src={% static 'advanced_search.js' %}></script>
{% endblock innhold %}